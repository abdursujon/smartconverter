<?php require('template/header.phtml'); ?>
<link href="/css/calculator.css" rel="stylesheet">

<?php
// Display validation errors if they exist
if (!empty($view->errors)) {
    echo "<div class='alert alert-danger' style='margin-top:50px;'>";
    echo "<strong>Please correct the following errors:</strong>";
    echo "<ul>";
    foreach ($view->errors as $error) {
        echo "<li>" . htmlspecialchars($error) . "</li>";
    }
    echo "</ul>";
    echo "</div>";
}

// Check if the session variables are set
if (isset($_SESSION['name']) && isset($_SESSION['dob'])) {
    // If the session data exists, display the user's information
    echo "<div class='result-text'>";
    echo "<h1>Welcome back, " . htmlspecialchars($_SESSION['name']) . "!</h1>";
    echo "<p>Your date of birth is: " . htmlspecialchars($_SESSION['dob']) . "</p>";
    echo "<p><a href='clear-session.php'>Clear my information</a></p>";

    echo "</div>";
} else {
    // If the session data does not exist, display the form
?>
    <form action="session-exercise.php" method="post" class="calculator-form">
        <div class="form-group">
            <label for="name">Name</label>
            <input type="text" name="name" id="name" class="form-control" required value="<?php echo isset($_POST['name']) ? htmlspecialchars($_POST['name']) : '' ?>">
        </div>
        <div class="form-group">
            <label for="dob">Date of Birth</label>
            <input type="date" name="dob" id="dob" class="form-control" required value="<?php echo isset($_POST['dob']) ? htmlspecialchars($_POST['dob']) : '' ?>">
        </div>
        <div class="form-group">
            <input type="submit" name="submit" value="Submit" class="btn btn-primary">
        </div>
    </form>
<?php
}

require('template/footer.phtml');
?>
